<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>CDW</title>
	<!-- estilos -->
	<link rel='stylesheet' type='text/css' href='/objetos/css/estilos.css'>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
	<!-- dependencias -->
	<script type='text/javascript' src='/objetos/js/moment.js'></script>
	<script type='text/javascript' src='/objetos/js/moment-with-locales.min.js'></script>
	<script type='text/javascript' src="/objetos/js/simplemde.min.js"></script>
	<script type='text/javascript' src='/objetos/js/firebase.js'></script>
	<script type='text/javascript' src='/objetos/js/showdown.min.js'></script>
	<!-- app -->
	<script type='text/javascript' src='/objetos/js/cliente.js'></script>
	<script type='text/javascript' src='/objetos/js/servidor.js'></script>
</head>
<body>

	<!-- cabecera -->
	<header class='page-header'>
		<h1 id='title-header'>Curso de Diseño Web</h1>
	</header>

	<!-- contenido -->
	<div class='main-content'>

		<!-- formularios -->
		<section id='forms' class='none'>
			<h2 id='title-create'>Crear</h2>

			<!-- crear noticia -->
			<form id='form-new' class='none' onsubmit='return nuevaNoticia(this)'>
				<input
					id='title'
					placeholder='Titulo'
					type='text'
					required>
				<input
					id='email'
					placeholder='Email'
					type='email'
					required>
				<textarea
					id='content'
					placeholder='Noticia'
					type='text'></textarea>
				<input class='btn btn-success' type='submit' value='Guardar'>
				<a class='back' onclick='return prepararLista()'>Volver</a>
			</form>

			<!-- editar noticia -->
			<form id='form-edit' class='none' onsubmit='return editarNoticiaSubmit(this)'>
				<input
					id='id-edit'
					type='text'
					value=''
					class='none'>
				<input
					id='title-edit'
					placeholder='Titulo'
					type='text'
					required>
				<input
					id='email-edit'
					placeholder='Email'
					type='email'
					required>
				<textarea
					id='content-edit'
					placeholder='Noticia'
					type='text'></textarea>
				<input id='submit' class='btn btn-warning' type='submit' value='Guardar'>
				<a class='back' onclick='return prepararLista()'>Volver</a>
			</form>
		</section>

		<!-- listado -->
		<section id='list'>
			<h2 id='title-list'>Noticias</h2>
			<div id='all'>
				<small>cargando...</small>
			</div>
		</section>

		<br>
		<hr>

		<!-- pie -->
		<footer>
			<h3 class='text-center'>
				<small>Centro de formación profesional - Pigüé</small>
			</h3>
			<a
				target='_blank'
				class='text-center'
				rel='noopener noreferrer'
				href='https://github.com/rody7val/web-noticias-cdw'>
				<img src='/objetos/img/github-logo.png' alt='github-logo'>
			</a>

			<!-- cargador de imagenes -->
			<div id='upload' class='none'>
				<input
					id='img-upload'
					type='file'>
				<progress id='progress' value='0' max='100'></progress>
				<input
					id='img'
					type='text'
					placeholder='link'
					readonly>
				<div style='position:relative'>
					<img id='fondo' width='100%' src='' alt='Subir imagen'>
					<span
						title='Copiar link'
						onclick='copiarAlPortapapeles("img")'
						class='copy fa fa-copy'></span>
				</div>
			</div>

			<!-- boton crear -->
			<div class='create' onclick='return verFormularioCrear()'>
				<img src="/objetos/img/mas.png">
			</div>
		</footer>
	</div>

	<!-- utilidades -->
	<script type='text/javascript' src='/objetos/js/config.js'></script>
	<script type='text/javascript' src='/objetos/js/event.js'></script>
	<script type='text/javascript' src='/objetos/js/utils.js'></script>
	<script type='text/javascript' src='/objetos/js/render.js'></script>

	<!-- ejecución -->
	<script type='text/javascript'>
		// crear app cliente;
		const diario = new Diario([]);

		// crear app servidor;
		const db = new DataBase('https', 'cdwpigue.herokuapp.com');

		// obtener noticias del servidor
		db.obtener(noticias => {
			// guardarlas en el lado cliente
			diario.guardar(noticias);
			// y renderizarlas
			renderizar.listado(noticias);
		});
	</script>
</body>
</html>