<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8'>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<title>CDW</title>
	<!-- estilos -->
	<link rel='stylesheet' type='text/css' href='/objetos/css/estilos.css'>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/simplemde/latest/simplemde.min.css">
	<!-- dependencias -->
	<script type='text/javascript' src='/objetos/js/dependencias/firebase.js'></script>
	<script type='text/javascript' src='/objetos/js/dependencias/moment.js'></script>
	<script type='text/javascript' src='/objetos/js/dependencias/moment-with-locales.min.js'></script>
	<script type='text/javascript' src='/objetos/js/dependencias/showdown.min.js'></script>
	<script type='text/javascript' src="/objetos/js/dependencias/simplemde.min.js"></script>
	<!-- app -->
	<script type='text/javascript' src='/objetos/js/app/cliente.js'></script>
	<script type='text/javascript' src='/objetos/js/app/servidor.js'></script>
</head>
<body>

	<!-- cabecera -->
	<header class='page-header'>
		<h1 id='title-header'>Curso de Diseño Web</h1>
	</header>

	<!-- contenido -->
	<div class='main-content'>

		<!-- formularios -->
		<section id='forms' class='none'>
			<h2 id='title-create'>Crear</h2>

			<!-- crear noticia -->
			<form id='form-new' class='none' onsubmit='return nuevaNoticia(this)'>
				<input
					id='title'
					placeholder='Titulo'
					type='text'
					required>
				<input
					id='email'
					placeholder='Email'
					type='email'
					required>
				<textarea
					id='content'
					placeholder='Noticia'
					type='text'></textarea>
				<input class='btn btn-success' type='submit' value='Guardar'>
				<a class='back' onclick='return prepararLista()'>Volver</a>
			</form>

			<!-- editar noticia -->
			<form id='form-edit' class='none' onsubmit='return editarNoticiaSubmit(this)'>
				<input
					id='id-edit'
					type='text'
					value=''
					class='none'>
				<input
					id='title-edit'
					placeholder='Titulo'
					type='text'
					required>
				<input
					id='email-edit'
					placeholder='Email'
					type='email'
					required>
				<textarea
					id='content-edit'
					placeholder='Noticia'
					type='text'></textarea>
				<input id='submit' class='btn btn-warning' type='submit' value='Guardar'>
				<a class='back' onclick='return prepararLista()'>Volver</a>
			</form>
		</section>

		<!-- listado -->
		<section id='list'>
			<h2 id='title-list'>Noticias</h2>
			<div id='all'>
				<small>cargando...</small>
			</div>
		</section>

		<br>
		<hr>

		<!-- pie -->
		<footer>
			<h3 class='text-center'>
				<small>Centro de formación profesional - Pigüé</small>
			</h3>
			<div class='social'>
				<a
					target='_blank'
					class='footer-link text-center'
					rel='noopener noreferrer'
					href='https://github.com/rody7val/web-noticias-cdw'>
					<img src='/objetos/img/github-logo.png' alt='github-logo'>
				</a>
				<a
					target='_blank'
					class='footer-link text-center'
					rel='noopener noreferrer'
					href='https://www.facebook.com/CFP401Pigue/'>
					<img src='/objetos/img/facebook-logo.png' alt='facebook-logo'>
				</a>
			</div>
			<!-- cargador de imagenes -->
			<div id='upload' class='none'>
				<span
					title='Cerrar'
					onclick='return cargadorDeImagenes(false)'
					class='close fa fa-close'></span>
				<input
					id='img-upload'
					type='file'>
				<progress id='progress' value='0' max='100'></progress>
				<input
					id='img'
					type='text'
					placeholder='link'
					readonly>
				<div style='position:relative; min-height: 42px;'>
					<div class='shadow'></div>
					<img id='fondo' src='' alt='Ninguna imagen'>
					<span
						title='Copiar link'
						onclick='return copiarAlPortapapeles("img")'
						class='copy fa fa-copy'></span>
				</div>
			</div>

			<!-- boton crear -->
			<div class='create' onclick='return verFormularioCrear()'>
				<img src="/objetos/img/mas.png">
			</div>
		</footer>
	</div>

	<!-- utilidades -->
	<script type='text/javascript' src='/objetos/js/utilidades/config.js'></script>
	<script type='text/javascript' src='/objetos/js/utilidades/event.js'></script>
	<script type='text/javascript' src='/objetos/js/utilidades/helpers.js'></script>
	<script type='text/javascript' src='/objetos/js/utilidades/render.js'></script>

	<!-- ejecución -->
	<script type='text/javascript'>
		// crear app cliente;
		const diario = new Diario([]);

		// crear app servidor;
		const db = new DataBase('https', 'cdwpigue.herokuapp.com');

		// obtener noticias del servidor
		db.obtener(noticias => {
			// guardarlas en el lado cliente
			diario.guardar(noticias);
			// y renderizarlas
			renderizar.listado(noticias);
		});
	</script>
</body>
</html>